nytimes_str = """
\nTITLE: 特朗普的关税可能会伤害亚洲，但也将损害美国\nAUTHORS: 艾莎2025年2月24日\nPUBLISH DATE: None\nTOP_IMAGE_URL: \nTEXT:\n\nAs President Trump uses tariffs as a weapon in his quest to even the score on trade with the world, Asia is emerging as target No. 1. And it’s not just because of China.随着特朗普总统将关税作为武器，以求扭转与世界各国贸易的不利局势，亚洲正成为头号目标。这不仅仅是因为中国。Asia is home to seven countries that run the biggest trade surpluses with the United States, Mr. Trump’s go-to yardstick. It has some of the biggest exporters of goods that Mr. Trump promised to tax, like Japanese and South Korean cars, Taiwanese chips, and Indian drugs. Many of the region’s countries have become top destinations for Chinese goods and investment, evidence that Mr. Trump cites to accuse China of using a back door into the U.S. market.亚洲有七个国家对美国的贸易顺差最大，而这种差异正是特朗普常用的衡量标准。亚洲一些国家是特朗普承诺征税的商品的最大出口国，比如生产汽车的日本和韩国、生产芯片的台湾和生产药品的印度。该地区的许多国家已经成为中国商品和投资的主要目的地，特朗普引用这些证据来指责中国利用后门进入美国市场。Mr. Trump’s plan to upend the rules of world trade could hurt Asia because the region relies so much on the global economy. But it will also scramble supply chains and trade flows that are already undergoing change as companies have sought alternatives to China as the source of their goods.特朗普颠覆世界贸易规则的计划可能会伤害亚洲，因为该地区非常依赖全球经济。但它也将扰乱供应链和贸易流，这些领域本身已经在发生变化，因为企业在寻找替代中国的产品来源。The result could be a domino effect of protectionism, with countries turning inward and raising tariffs in response to American trade barriers, experts said. The upheaval could also generate a new cast of regional alliances and ultimately a reduction in the importance of the United States in trade with Asia.专家们表示，结果可能是保护主义的多米诺骨牌效应，各国将转向国内，提高关税，以应对美国的贸易壁垒。这种剧变还可能催生一批新的地区联盟，并最终降低美国在与亚洲贸易中的重要性。“There is a risk that the U.S. really overplays its leverage,” said Simon Evenett, a professor at IMD Business School in Switzerland. “The U.S. market is still the biggest in the world, but proportionally it is lower than it was 20 years ago.”“美国确实有高估其影响力的风险，”瑞士洛桑国际发展管理学院教授西蒙·伊文奈特表示。“美国仍然是世界上最大的市场，但其占比低于20年前。”泰国的一家电动汽车工厂。泰国的电动汽车行业面临着被中国垄断的风险。 Lauren DeCicca for The New York TimesSince taking office a month ago, Mr. Trump has enacted a 10 percent tariff on imports from China and is poised in coming weeks to add wider import taxes of 25 percent or higher on cars, steel and aluminum, semiconductors, pharmaceuticals, and lumber. He is also holding tariffs over Mexico and Canada, both of which have been stitched into American trade for decades by treaties, most recently by one signed by Mr. Trump in his first term.自一个月前上任以来，特朗普已对从中国进口的商品加征10%的关税，并准备在未来几周内对汽车、钢铝、半导体、药品和木材征收25%或更高、范围也更广泛的进口税。他还对墨西哥和加拿大征收关税，这两个国家几十年来都通过条约融入了美国的贸易，最近的一项条约是特朗普在第一个任期内签署的。Most strikingly, Mr. Trump has also promised “reciprocal tariffs,” which typically refer to one-for-one taxes on individual countries. He has said he will also base those tariffs on other factors that he says hurt the United States, such as a country’s currency exchange rates, tax policies and domestic subsidies to business.最引人注目的是，特朗普还承诺征收“对等关税”，这通常是指对各个国家实施一比一的关税。他表示，他还将根据他所称的伤害美国的其他因素征收关税，比如某个国家的货币汇率、税收政策和对企业的国内补贴。The damage, economists warn, would be severe. Tariffs that have been announced on autos, semiconductors, energy and pharmaceuticals account for a quarter of the total exports from Asia, according to Morgan Stanley. Economic growth in the region will slow to 3.7 percent this year from 4 percent last year, according to Moody’s.经济学家警告，这将带来严重的损害。摩根士丹利表示，已宣布的汽车、半导体、能源和药品关税占亚洲出口总额的四分之一。根据穆迪的预测，该地区今年的经济增长率将从去年的4%降至3.7%。The outcome of Mr. Trump’s threat of “reciprocal tariffs” is less certain, because his proposal is potentially so far-reaching and depends on which misdemeanors the administration chooses to home in on for any particular country.特朗普“对等关税”威胁的结果并不确定，因为他的提议可能影响深远，而且取决于政府选择针对特定国家的哪些不当行为。The United States last year placed China, Japan, South Korea, Singapore, Taiwan and Vietnam on a watch list of countries believed to be manipulating their currencies, typically by keeping them low to bolster their exports at the expense of the United States, which last year imported a record $1.2 trillion more than it exported.美国去年将中国、日本、韩国、新加坡、台湾和越南列入观察名单，这些国家被认为操纵本国货币，通常是通过压低本国货币来促进出口，从而损害美国的利益，美国去年的进口额比出口额高出创纪录的1.2万亿美元。Indonesia, Japan and Malaysia have tariffs on imported goods in certain sectors that are higher than American tariffs on those same goods. When it comes to Chinese investment in another Asian country, Vietnam sticks out. It has been one of the world’s biggest beneficiaries of factories moving out of China in recent years.印度尼西亚、日本和马来西亚对某些领域的进口商品征收的关税高于美国对相同商品征收的关税。至于中国在其他亚洲国家的投资，越南显得格外引人瞩目。近年来，它一直是全球工厂迁出中国的最大受益者之一。集装箱和汽车驶出工厂，在中国天津港等待出口。 The New York TimesSome countries are responding by trying to soften the blow and, in some cases, lay the groundwork for deals with Washington. Vietnam has floated the possibility of importing more American soybeans and other agricultural products. India has cut its tariffs on bourbon. In South Korea, the government pledged $249.3 billion of trade financing to help its exporters that are hit by tariffs.一些国家的回应措施是努力缓和打击，在某些情况下，为与华盛顿达成协议奠定基础。越南提出了进口更多美国大豆和其他农产品的可能性。印度削减了波旁威士忌的关税。在韩国，政府承诺提供2493亿美元的贸易融资，帮助受到关税打击的出口商。In the background is the constant threat of a new tariff from Mr. Trump — keeping governments, companies and experts on edge and potentially paralyzing global commerce. Markets have lurched up and down. Wall Street banks have diverted teams to run different tariff scenarios, spit out figures and quantify future risks. Economists are pulling their hair out — one likened the uncertainty to the early days of the global financial crisis when policymakers would wake to find that Washington had made major decisions like financial bailouts overnight.在这样的背景下，特朗普不断威胁要征收新关税，让各国政府、企业和专家坐立不安，并可能使全球贸易陷入瘫痪。市场起伏不定。华尔街银行调派了团队来模拟不同的关税情景，从而得出数据，并量化未来的风险。经济学家们焦头烂额——有人把这种不确定性比作当年全球金融危机的早期，当时各国政策制定者们一觉醒来，发现华盛顿在一夜之间做出了金融纾困等重大决定。As if these pressures were not enough, many Southeast Asian countries are contending with the fallout of a bruising, yearslong trade war between the United States and China that has shut out much of the U.S. market for Chinese goods, resulting in Chinese goods flooding into other markets. From Thailand to Indonesia, thousands of factories and firms have been put out of business by Chinese competitors. Some countries have responded with tariffs aimed at stemming the flood of goods from China.除了这些压力，许多东南亚国家还在努力应对美国和中国之间持续数年的激烈贸易战的后果，这场贸易战将中国商品拒于美国市场之外，导致它们涌入其他各国市场。从泰国到印尼，数以千计的工厂和公司被中国竞争对手挤垮。一些国家以关税作为回应，旨在遏制来自中国的商品洪流。“Now we have the biggest rival in our backyard, and we have to worry about what are the reciprocal measures that are coming from the United States,” said Priyanka Kishore, an economist in Singapore and the founder of Asia Decoded, a consulting firm.“现在，最大的竞争对手就在我们的后院，我们还不得不担心美国将采取什么对等措施，”新加坡经济学家、咨询公司亚洲解码的创始人普里扬卡·基肖尔说。日本和韩国汽车也将受到美国关税的影响。 Hiroko Masuike/The New York TimesBut the presence of cheap Chinese goods can also help Southeast Asian businesses reduce their costs, while providing an option for cheaper components than are available locally. Along the way, Chinese factories are setting up supply chains, hiring local employees and paying taxes in those countries. The risk is that Chinese companies end up dominating industries like Thailand’s electric vehicle sector.但是，廉价中国商品的存在也可以帮助东南亚企业降低成本，同时为他们提供比当地更便宜的零部件。在此过程中，中国工厂在这些国家建立供应链，雇佣当地员工并纳税。风险在于，中国企业最终会主导泰国电动汽车这样的行业。Countries like Malaysia, Thailand and Vietnam, which have signed trade agreements with multiple countries, might even benefit from having Chinese companies move in to set up manufacturing bases, said Manu Bhaskaran, a partner at Centennial Group, a policy advisory group.政策咨询集团百年集团的合伙人马努·巴斯卡兰说，马来西亚、泰国和越南等与多国签署了贸易协定的国家甚至可能会因中国企业进入本国建立制造基地而受益。It could risk the ire of Mr. Trump, who has railed against countries that are serving as a back door into the United States, but these concerns are overblown, he said.他说，这可能会引起特朗普的愤怒，他一直在抨击那些充当进入美国后门的国家，但巴斯卡兰说，这些担忧被夸大了。“If it is the case that a Chinese producer brings goods into a warehouse in Vietnam and then changes the labels, that is blatant bypassing of trade rules,” said Mr. Bhaskaran, who is based in Singapore.“如果中国生产商把商品带到越南的仓库，然后更改标签，这是公然绕过贸易规则的行为，”常驻新加坡的巴斯卡兰说。On the other hand, he added, a company from China that opens a factory in a country like Vietnam and buys a large chunk of its goods locally is not typically seen as “bypassing tariffs.”但另一方面，一家中国公司在越南这样的国家开设工厂，并在当地购买大量商品，通常不会被视为“规避关税”。Some clear winners are emerging from the existing realignments of trade.A recent economic trade zone established between Singapore and Malaysia has attracted both American and Chinese companies that can no longer manufacture in China because of tariffs.最近在新加坡和马来西亚之间建立的一个经济贸易区吸引了由于关税而不能在中国生产的美国和中国公司。But if other countries choose to turn inward as Mr. Trump is doing with the United States, throwing up trade barriers and tariffs, things will get more complicated.但是，如果其他国家选择像特朗普在美国所做的那样转向国内，设置贸易和关税壁垒，事态将变得更加复杂。“In Asia, we’re seeing supply chains becoming more regional,” said Albert Park, the chief economist for the Asian Development Bank in Manila. “So, if countries in the region stay open to trade and investment amongst themselves, then that’s a measure of safety or protection.”“在亚洲，我们看到供应链正变得越来越具有区域性，”马尼拉亚洲开发银行首席经济学家阿尔伯特·帕克说。“因此，如果该地区的国家对彼此之间的贸易和投资保持开放，那么这就是一种安全或保护措施。”These countries are growing the fastest and account for a much larger share of the global economy than before, he added. “You may just see more focus on investments catering to those markets, because they’re more stable.”他还表示，这些国家增长最快，在全球经济中所占的份额也比以前大得多。“你可能会看到更多的投资会关注迎合这些市场，因为它们更稳定。
"""
keyword_str = "特朗普 , 关税 , 亚洲 , 中国 , 日本 , 韩国 , 台湾 , 印度 , 供应链 , 保护主义 , 汽车 , 半导体 , 能源 , 药品 , 经济增长 , 泰国 , 电动汽车 , 越南 , 大豆 , 印度 , 威士忌 , 韩国 , 贸易融资 , 美国 , 中国市场 , 波动 , 华尔街 , 东南亚 , 中国商品 , 泰国 , 印尼 , 工厂 , 成本优势 , 全球贸易 , 新平衡点"

title_str = "《特朗普关税双刃剑：亚洲受伤，美国也不幸免》，《关税战升级：特朗普政策殃及池鱼》，《特朗普关税政策：亚洲与美国的双重打击》"
china_daily_str = """
\nTITLE: 各地掀起重大项目开工潮 为全年经济发展注入强动力\nAUTHORS: 程尔凡\nPUBLISH DATE: None\nTOP_IMAGE_URL: \nTEXT:\n\n\n              中新网 北京2月25日电(记者 左宇坤)人勤春早，全国各地重大项目建设蓄满力、拉满弓，掀起“开工潮”。 \n重大项目是经济发展的“压舱石”，也是扩大有效投资的重要抓手。从各地新年第一会、省级两会等的部署可以看出，地方纷纷强调发挥重大项目的牵引作用。 \n中新网 记者发现，今年各地重大项目集中体现了三个“更加突出”。 \n  海南洋浦国际集装箱码头，洋浦区域国际集装箱枢纽港扩建工程正在进行设备调试，远处的集装箱轮在靠泊作业。 陈英清 摄 \n一是更加突出科技创新引领。 \n推进高质量发展，优化供给结构是必然选择。 \n北京师范大学教授万喆对记者表示，各地首批开工的重大项目中，科技创新含量高的新兴产业项目占比显著提升，从早期布局到行动落地均瞄准新质生产力。 \n如，安徽第一批开工的622个项目中，新兴产业项目占比55.3%，涵盖新能源汽车、高端装备制造、人工智能等产业。 \n新兴产业持续壮大，中国产业体系的新支柱正逐步形成。2024年，中国规模以上高技术制造业增加值同比增长8.9%，远高于规模以上工业增加值5.8%的增长率和规模以上制造业增加值6.1%的增长率。 \n置身全球产业链，中国创新的溢出效应显著。2024年，中国新能源汽车产量达1316.8万辆，连续10年位居全球首位，成为全球首个年产量超千万辆的国家，更将技术红利辐射至全球汽车产业变革进程。 \n二是更加突出结构完善优化。 \n引进即筹建、拿地即开工、完工即投产……万喆指出，各地与重大项目有关的机制也在创新，旨在优化审批步骤，提高流程效率，尽早开工落地，加快形成实物工作量。 \n在项目建设上加速度。广东东莞2025年计划新开工重大项目185个，截至2月7日已新开工重大项目27个，一季度新开工重大项目开工率达到40.9%，刷新“东莞速度”。 \n在业务融合中做减法。用地用林审批是项目推进中的重要一环，江苏自今年起对省及省以下批准用地用林事项全面实行用地用林合并审批，效率最高提升3倍以上。 \n在要素保障中提质效。浙江提出持之以恒抓好重大项目建设，加强用地、资金、能耗等要素保障；江西提出统筹好项目建设过程中要素需求与市场供给的关系，加强供需对接。 \n三是更加突出“两重”融合衔接。 \n2024年，中国扎实推动“两重”建设取得明显成效。西部陆海新通道、东北黑土地高标准农田、“三北”工程等1465个重大项目建设，有力支撑了全年经济增长。 \n重大项目之“大”，在于投资额度大、产业链条长、带动性强。2024年，中国计划总投资亿元及以上项目投资比上年增长7.0%，增速比全部投资高3.8个百分点，拉动全部投资增长3.8个百分点。 \n国家发改委此前透露，2025年约1000亿元“两重”项目清单已提前下达。这为各地重大项目建设及投资创造了积极条件。 \n随着超长期特别国债和地方政府专项债等资金发行使用，“两重”项目建设将加快推进，持续释放带动效应。 \n万喆建议，推进重大项目时要关注国资、外资、民资的协同，近期公布的第八批重大外资项目将带来技术溢出和产业升级。同时，要关注配套的中小型项目，提升民营企业等市场主体的参与度，激发市场活力。 \n大江南北，重大项目扬鞭奋蹄，新老基建落地开花，投资活力不断释放，为经济起跑蓄势积力。(完)\n                【责任编辑：程尔凡】\n          \n
"""
import re


def wash_article_from_nytimes(input: str, url: str) -> dict:
    input = input.replace("\n", "")
    title = re.search(r"TITLE: (.*)", input)
    content = re.search(r"TEXT:\s*([\s\S]*)", input)
    if title:
        title = title.group(1).split("AUTHORS")[0]
    else:
        title = ""
    if content:
        content = content.group(1)

    else:
        content = ""
    if "https://cn.nytimes.com" in url:
        content = re.findall(r"[\u4e00-\u9fa5，。！？《》“”]+", content)
        content = "".join(content)
        return {"title": title, "content": content}
    elif "http://china.chinadaily.com.cn" in url:
        return {"title": title, "content": content}


def wash_keyword(keyword: str) -> list:
    # dify limits output length to 30
    return {"keywords": keyword.replace(" ", "").replace("\n", "").split(",")[:30]}


def wash_title(title: str) -> list:
    return {"titles": re.findall(r"《(.*?)》", title)}


if __name__ == "__main__":
    print(wash_article_from_nytimes(nytimes_str, "https://cn.nytimes.com"))
    print(wash_keyword(keyword_str))
    print(wash_title(title_str))
    print(wash_article_from_nytimes(china_daily_str, "http://china.chinadaily.com.cn"))
